<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="QTCKD">
  <!--查询其他出库单  -->
  <select id="queryQTCKD" parameterType="Map" resultType="java.util.Map">
  	SELECT A.JLWBDH,
	       S.SPXX02 SPBM, 
	       S.SPXX04 SPMC,
	       B.SYDI01 SL,
	       B.SYDI05 DJ, 
	       B.SYDI02 JE, 
	       (SELECT SYLX02 FROM SYLX WHERE SYLX01 = B.SYLX01) CKLX,
	       B.CK01,
	       (SELECT CK02 FROM CK WHERE CK01 = B.CK01) CKMC,
	       B.BM01, 
	       (SELECT BM02 FROM BM WHERE BM01 = B.BM01) BMMC, 
	       B.WLDW01, 
	       (SELECT WLDW02 FROM WLDW WHERE WLDW01 = B.WLDW01) WLDWMC, 
	       A.SYD02 ZDR, 
	       A.SYD03 ZDRQ,
	       A.SYD04 SHR, 
	       A.SYD05 SHRQ 
	       FROM SYDJ A, SYDJITEM B, SPXX S ,WLDW W
	       WHERE A.SYD01 = B.SYD01
		   AND A.GSXX01 = B.GSXX01
		   AND B.SPXX01 = S.SPXX01
		   AND B.WLDW01=W.WLDW01

      
       <if test="JLWBDH != null and JLWBDH != ''">
	   		<foreach item="item" index="index" collection="JLWBDH"  open=" AND (" separator=" or " close=")"> 
		  		A.JLWBDH LIKE '%'||#{item}||'%'
	   		</foreach> 

       </if>
       <if test="CKLX != null and CLX != ''">
         AND B.SYLX01 LIKE '%'||#{CKLX}||'%'
       </if>
        <if test="BM01 != null and BM01 != ''">
	   <foreach item="item" index="index" collection="BM01"  open=" AND (" separator=" or " close=")"> 
		 B.BM01  LIKE '%'||#{item}||'%'
	   </foreach> 
	 </if>
       <if test="SPXX !=null and SPXX != ''">
	    <foreach item="item" index="index" collection="SPXX"  open=" AND (" separator=" or " close=")"> 
	       S.SPXX02 LIKE '%'||#{item}||'%' OR S.SPXX04 LIKE '%'||#{item}||'%'
	    </foreach>    
	  </if> 
	  
        <if test="GYS != null and GYS !=''"> 
       <foreach item="item" index="index" collection="GYS"  open=" AND (" separator=" or " close=")"> 	      
		      W.WLDW02 LIKE '%'||#{item}||'%' OR B.WLDW01 LIKE '%'||#{item}||'%'    
	   </foreach>  
      </if>   
         
       <if test="CK01 != null and CK01 != ''">
	   <foreach item="item" index="index" collection="CK01"  open=" AND (" separator=" or " close=")"> 
		 B.CK01  LIKE '%'||#{item}||'%'
	   </foreach> 
	 </if>     
        <if test="ZDRQKS != null and ZDRQKS != ''">
	  <![CDATA[AND  A.SYD03>= TO_DATE(#{ZDRQKS},'YYYY-MM-DD')]]> 
	  </if> 														
	  <if test="ZDRQJS != null  and ZDRQJS!= ''">
	  <![CDATA[ AND  A.SYD03<= TO_DATE(#{ZDRQJS},'YYYY-MM-DD')]]>
	  </if> 
	   <if test="SHRQKS != null and SHRQKS != ''">
	    <![CDATA[AND  A.SYD05 >= TO_DATE(#{SHRQKS},'YYYY-MM-DD')]]> 
	  </if> 	  														
	  <if test="SHRQJS != null  and SHRQJS!= ''">
	  <![CDATA[ AND  A.SYD05 <= TO_DATE(#{SHRQJS},'YYYY-MM-DD')]]>
	  </if>
      <if test="ZDRMC!= null and ZDRMC!= ''">
	   <foreach item="item" index="index" collection="ZDRMC"  open=" AND (" separator=" or " close=")"> 
	       A.SYD02 LIKE '%'||#{item}||'%'
		  </foreach>
	    </if> 
        <if test="SHRMC!= null and SHRMC!= ''">
	    <foreach item="item" index="index" collection="SHRMC"  open=" AND (" separator=" or " close=")"> 
	        A.SYD04 LIKE '%'||#{item}||'%'
		  </foreach>
	    </if>
       JL{CZY|B.WLDW01|WLDW_CZ|inS}JL
       JL{CZY|B.BM01|BM_CZ|LIKE%}JL
       JL{CZY|B.GSXX01|CZGS_CZ|LIKE%}JL
  </select>
	
	
	

  
</mapper>